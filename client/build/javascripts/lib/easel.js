/**
* EaselJS
* Visit http://easeljs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011 Grant Skinner
* 
* Permission is hereby granted, free of charge, to any person
* obtaining a copy of this software and associated documentation
* files (the "Software"), to deal in the Software without
* restriction, including without limitation the rights to use,
* copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the
* Software is furnished to do so, subject to the following
* conditions:
* 
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
* 
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
* OTHER DEALINGS IN THE SOFTWARE.
**/
(function(a){var b=function(){throw"UID cannot be instantiated"};b._nextID=0,b.get=function(){return b._nextID++},a.UID=b})(window),function(a){var b=function(){throw"Ticker cannot be instantiated."};b.useRAF=null,b._listeners=null,b._pauseable=null,b._paused=!1,b._inited=!1,b._startTime=0,b._pausedTime=0,b._ticks=0,b._pausedTickers=0,b._interval=50,b._lastTime=0,b._times=null,b._tickTimes=null,b._rafActive=!1,b._timeoutID=null,b.addListener=function(a,d){b._inited||b.init(),b.removeListener(a),b._pauseable[b._listeners.length]=d==null?!0:d,b._listeners.push(a)},b.init=function(){b._inited=!0,b._times=[],b._tickTimes=[],b._pauseable=[],b._listeners=[],b._times.push(b._startTime=b._getTime()),b.setInterval(b._interval)},b.removeListener=function(a){b._listeners!=null&&(a=b._listeners.indexOf(a),a!=-1&&(b._listeners.splice(a,1),b._pauseable.splice(a,1)))},b.removeAllListeners=function(){b._listeners=[],b._pauseable=[]},b.setInterval=function(d){b._lastTime=b._getTime(),b._interval=d,b.timeoutID!=null&&clearTimeout(b.timeoutID);if(b.useRAF){if(b._rafActive)return;b._rafActive=!0;var e=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame;if(e){e(b._handleAF);return}}b._inited&&(b.timeoutID=setTimeout(b._handleTimeout,d))},b.getInterval=function(){return b._interval},b.setFPS=function(a){b.setInterval(1e3/a)},b.getFPS=function(){return 1e3/b._interval},b.getMeasuredFPS=function(a){return b._times.length<2?-1:(a==null&&(a=b.getFPS()>>1),a=Math.min(b._times.length-1,a),1e3/((b._times[0]-b._times[a])/a))},b.setPaused=function(a){b._paused=a},b.getPaused=function(){return b._paused},b.getTime=function(a){return b._getTime()-b._startTime-(a?b._pausedTime:0)},b.getTicks=function(a){return b._ticks-(a?b._pausedTickers:0)},b._handleAF=function(d){d-b._lastTime>=b._interval-1&&b._tick(),b.useRAF?(a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame)(b._handleAF,b.animationTarget):b._rafActive=!1},b._handleTimeout=function(){b._tick(),b.useRAF||(b.timeoutID=setTimeout(b._handleTimeout,b._interval))},b._tick=function(){b._ticks++;var a=b._getTime(),d=a-b._lastTime,e=b._paused;e&&(b._pausedTickers++,b._pausedTime+=d),b._lastTime=a;for(var f=b._pauseable,g=b._listeners.slice(),h=g?g.length:0,i=0;i<h;i++){var j=f[i],k=g[i];k==null||e&&j||k.tick==null||k.tick(d,e)}for(b._tickTimes.unshift(b._getTime()-a);b._tickTimes.length>100;)b._tickTimes.pop();for(b._times.unshift(a);b._times.length>100;)b._times.pop()},b._getTime=function(){return(new Date).getTime()},a.Ticker=b}(window),function(a){var b=function(a,b,c,d,e){this.initialize(a,b,c,d,e)},c=b.prototype;c.stageX=0,c.stageY=0,c.type=null,c.nativeEvent=null,c.onMouseMove=null,c.onMouseUp=null,c.target=null,c.initialize=function(a,b,c,d,e){this.type=a,this.stageX=b,this.stageY=c,this.target=d,this.nativeEvent=e},c.clone=function(){return new b(this.type,this.stageX,this.stageY,this.target,this.nativeEvent)},c.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},a.MouseEvent=b}(window),function(a){var b=function(a,b,c,d,e,f){this.initialize(a,b,c,d,e,f)},c=b.prototype;b.identity=null,b.DEG_TO_RAD=Math.PI/180,c.a=1,c.b=0,c.c=0,c.d=1,c.tx=0,c.ty=0,c.alpha=1,c.shadow=null,c.compositeOperation=null,c.initialize=function(a,b,c,d,e,f){a!=null&&(this.a=a),this.b=b||0,this.c=c||0,d!=null&&(this.d=d),this.tx=e||0,this.ty=f||0},c.prepend=function(a,b,c,d,e,f){var g=this.tx;if(a!=1||b!=0||c!=0||d!=1){var h=this.a,i=this.c;this.a=h*a+this.b*c,this.b=h*b+this.b*d,this.c=i*a+this.d*c,this.d=i*b+this.d*d}this.tx=g*a+this.ty*c+e,this.ty=g*b+this.ty*d+f},c.append=function(a,b,c,d,e,f){var g=this.a,h=this.b,i=this.c,j=this.d;this.a=a*g+b*i,this.b=a*h+b*j,this.c=c*g+d*i,this.d=c*h+d*j,this.tx=e*g+f*i+this.tx,this.ty=e*h+f*j+this.ty},c.prependMatrix=function(a){this.prepend(a.a,a.b,a.c,a.d,a.tx,a.ty),this.prependProperties(a.alpha,a.shadow,a.compositeOperation)},c.appendMatrix=function(a){this.append(a.a,a.b,a.c,a.d,a.tx,a.ty),this.appendProperties(a.alpha,a.shadow,a.compositeOperation)},c.prependTransform=function(a,c,d,e,f,g,h,i,j){if(f%360)var k=f*b.DEG_TO_RAD,f=Math.cos(k),k=Math.sin(k);else f=1,k=0;if(i||j)this.tx-=i,this.ty-=j;g||h?(g*=b.DEG_TO_RAD,h*=b.DEG_TO_RAD,this.prepend(f*d,k*d,-k*e,f*e,0,0),this.prepend(Math.cos(h),Math.sin(h),-Math.sin(g),Math.cos(g),a,c)):this.prepend(f*d,k*d,-k*e,f*e,a,c)},c.appendTransform=function(a,c,d,e,f,g,h,i,j){if(f%360)var k=f*b.DEG_TO_RAD,f=Math.cos(k),k=Math.sin(k);else f=1,k=0;g||h?(g*=b.DEG_TO_RAD,h*=b.DEG_TO_RAD,this.append(Math.cos(h),Math.sin(h),-Math.sin(g),Math.cos(g),a,c),this.append(f*d,k*d,-k*e,f*e,0,0)):this.append(f*d,k*d,-k*e,f*e,a,c);if(i||j)this.tx-=i*this.a+j*this.c,this.ty-=i*this.b+j*this.d},c.rotate=function(a){var b=Math.cos(a),a=Math.sin(a),c=this.a,d=this.c,e=this.tx;this.a=c*b-this.b*a,this.b=c*a+this.b*b,this.c=d*b-this.d*a,this.d=d*a+this.d*b,this.tx=e*b-this.ty*a,this.ty=e*a+this.ty*b},c.skew=function(a,c){a*=b.DEG_TO_RAD,c*=b.DEG_TO_RAD,this.append(Math.cos(c),Math.sin(c),-Math.sin(a),Math.cos(a),0,0)},c.scale=function(a,b){this.a*=a,this.d*=b,this.tx*=a,this.ty*=b},c.translate=function(a,b){this.tx+=a,this.ty+=b},c.identity=function(){this.alpha=this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.shadow=this.compositeOperation=null},c.invert=function(){var a=this.a,b=this.b,c=this.c,d=this.d,e=this.tx,f=a*d-b*c;this.a=d/f,this.b=-b/f,this.c=-c/f,this.d=a/f,this.tx=(c*this.ty-d*e)/f,this.ty=-(a*this.ty-b*e)/f},c.isIdentity=function(){return this.tx==0&&this.ty==0&&this.a==1&&this.b==0&&this.c==0&&this.d==1},c.decompose=function(a){a==null&&(a={}),a.x=this.tx,a.y=this.ty,a.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),a.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var c=Math.atan2(-this.c,this.d),d=Math.atan2(this.b,this.a);return c==d?(a.rotation=d/b.DEG_TO_RAD,this.a<0&&this.d>=0&&(a.rotation+=a.rotation<=0?180:-180),a.skewX=a.skewY=0):(a.skewX=c/b.DEG_TO_RAD,a.skewY=d/b.DEG_TO_RAD),a},c.reinitialize=function(a,b,c,d,e,f,g,h,i){return this.initialize(a,b,c,d,e,f),this.alpha=g||1,this.shadow=h,this.compositeOperation=i,this},c.appendProperties=function(a,b,c){this.alpha*=a,this.shadow=b||this.shadow,this.compositeOperation=c||this.compositeOperation},c.prependProperties=function(a,b,c){this.alpha*=a,this.shadow=this.shadow||b,this.compositeOperation=this.compositeOperation||c},c.clone=function(){var a=new b(this.a,this.b,this.c,this.d,this.tx,this.ty);return a.shadow=this.shadow,a.alpha=this.alpha,a.compositeOperation=this.compositeOperation,a},c.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},b.identity=new b(1,0,0,1,0,0),a.Matrix2D=b}(window),function(a){var b=function(a,b){this.initialize(a,b)},c=b.prototype;c.x=0,c.y=0,c.initialize=function(a,b){this.x=a==null?0:a,this.y=b==null?0:b},c.clone=function(){return new b(this.x,this.y)},c.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},a.Point=b}(window),function(a){var b=function(a,b,c,d){this.initialize(a,b,c,d)},c=b.prototype;c.x=0,c.y=0,c.width=0,c.height=0,c.initialize=function(a,b,c,d){this.x=a==null?0:a,this.y=b==null?0:b,this.width=c==null?0:c,this.height=d==null?0:d},c.clone=function(){return new b(this.x,this.y,this.width,this.height)},c.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},a.Rectangle=b}(window),function(a){var b=function(a,b,c,d){this.initialize(a,b,c,d)},c=b.prototype;b.identity=null,c.color=null,c.offsetX=0,c.offsetY=0,c.blur=0,c.initialize=function(a,b,c,d){this.color=a,this.offsetX=b,this.offsetY=c,this.blur=d},c.toString=function(){return"[Shadow]"},c.clone=function(){return new b(this.color,this.offsetX,this.offsetY,this.blur)},b.identity=new b("transparent",0,0,0),a.Shadow=b}(window),function(a){var b=function(a){this.initialize(a)},c=b.prototype;c.complete=!0,c._animations=null,c._frames=null,c._images=null,c._data=null,c._loadCount=0,c._frameHeight=0,c._frameWidth=0,c._numFrames=0,c._regX=0,c._regY=0,c.initialize=function(a){var b,c,d;if(a!=null){if(a.images&&(c=a.images.length)>0){d=this._images=[];for(b=0;b<c;b++){var e=a.images[b];if(!(e instanceof Image)){var f=e,e=new Image;e.src=f}d.push(e),!e.getContext&&!e.complete&&(this._loadCount++,this.complete=!1,function(a){e.onload=function(){a._handleImageLoad()}}(this))}}if(a.frames!=null)if(a.frames instanceof Array){this._frames=[],d=a.frames;for(b=0,c=d.length;b<c;b++)f=d[b],this._frames.push({image:this._images[f[4]?f[4]:0],rect:new Rectangle(f[0],f[1],f[2],f[3]),regX:f[5]||0,regY:f[6]||0})}else c=a.frames,this._frameWidth=c.width,this._frameHeight=c.height,this._regX=c.regX||0,this._regY=c.regY||0,this._numFrames=c.count,this._loadCount==0&&this._calculateFrames();if((c=a.animations)!=null){this._animations=[],this._data={};for(var g in c){a={name:g},f=c[g];if(isNaN(f))if(f instanceof Array){a.frequency=f[3],a.next=f[2],d=a.frames=[];for(b=f[0];b<=f[1];b++)d.push(b)}else a.frequency=f.frequency,a.next=f.next,d=a.frames=f.frames.slice(0);else d=a.frames=[f];a.next=d.length<2||a.next==0?null:a.next==1?g:a.next,a.frequency||(a.frequency=1),this._animations.push(g),this._data[g]=a}}}},c.getNumFrames=function(a){return a==null?this._frames?this._frames.length:this._numFrames:(a=this._data[a],a==null?0:a.frames.length)},c.getAnimations=function(){return this._animations.slice(0)},c.getAnimation=function(a){return this._data[a]},c.getFrame=function(a){return this.complete&&this._frames&&(frame=this._frames[a])?frame:null},c.toString=function(){return"[SpriteSheet]"},c.clone=function(){var a=new b;return a.complete=this.complete,a._animations=this._animations,a._frames=this._frames,a._images=this._images,a._data=this._data,a._frameHeight=this._frameHeight,a._frameWidth=this._frameWidth,a._numFrames=this._numFrames,a._loadCount=this._loadCount,a},c._handleImageLoad=function(){--this._loadCount==0&&(this._calculateFrames(),this.complete=!0)},c._calculateFrames=function(){if(!this._frames&&this._frameWidth!=0){this._frames=[];for(var a=0,b=this._frameWidth,c=this._frameHeight,d=0,e=this._images;d<e.length;d++){for(var f=e[d],g=(f.width+1)/b|0,h=(f.height+1)/c|0,h=this._numFrames>0?Math.min(this._numFrames-a,g*h):g*h,i=0;i<h;i++)this._frames.push({image:f,rect:new Rectangle(i%g*b,(i/g|0)*c,b,c),regX:this._regX,regY:this._regY});a+=h}this._numFrames=a}},a.SpriteSheet=b}(window),function(a){function b(a,b){this.f=a,this.params=b}b.prototype.exec=function(a){this.f.apply(a,this.params)};var c=function(){this.initialize()},d=c.prototype;c.getRGB=function(a,b,c,d){return a!=null&&c==null&&(d=b,c=a&255,b=a>>8&255,a=a>>16&255),d==null?"rgb("+a+","+b+","+c+")":"rgba("+a+","+b+","+c+","+d+")"},c.getHSL=function(a,b,c,d){return d==null?"hsl("+a%360+","+b+"%,"+c+"%)":"hsla("+a%360+","+b+"%,"+c+"%,"+d+")"},c.STROKE_CAPS_MAP=["butt","round","square"],c.STROKE_JOINTS_MAP=["miter","round","bevel"],c._ctx=document.createElement("canvas").getContext("2d"),c.beginCmd=new b(c._ctx.beginPath,[]),c.fillCmd=new b(c._ctx.fill,[]),c.strokeCmd=new b(c._ctx.stroke,[]),d._strokeInstructions=null,d._strokeStyleInstructions=null,d._fillInstructions=null,d._instructions=null,d._oldInstructions=null,d._activeInstructions=null,d._active=!1,d._dirty=!1,d.initialize=function(){this.clear(),this._ctx=c._ctx},d.draw=function(a){this._dirty&&this._updateInstructions();for(var b=this._instructions,c=0,d=b.length;c<d;c++)b[c].exec(a)},d.moveTo=function(a,c){return this._activeInstructions.push(new b(this._ctx.moveTo,[a,c])),this},d.lineTo=function(a,c){return this._dirty=this._active=!0,this._activeInstructions.push(new b(this._ctx.lineTo,[a,c])),this},d.arcTo=function(a,c,d,e,f){return this._dirty=this._active=!0,this._activeInstructions.push(new b(this._ctx.arcTo,[a,c,d,e,f])),this},d.arc=function(a,c,d,e,f,g){return this._dirty=this._active=!0,g==null&&(g=!1),this._activeInstructions.push(new b(this._ctx.arc,[a,c,d,e,f,g])),this},d.quadraticCurveTo=function(a,c,d,e){return this._dirty=this._active=!0,this._activeInstructions.push(new b(this._ctx.quadraticCurveTo,[a,c,d,e])),this},d.bezierCurveTo=function(a,c,d,e,f,g){return this._dirty=this._active=!0,this._activeInstructions.push(new b(this._ctx.bezierCurveTo,[a,c,d,e,f,g])),this},d.rect=function(a,c,d,e){return this._dirty=this._active=!0,this._activeInstructions.push(new b(this._ctx.rect,[a,c,d,e])),this},d.closePath=function(){return this._active&&(this._dirty=!0,this._activeInstructions.push(new b(this._ctx.closePath,[]))),this},d.clear=function(){return this._instructions=[],this._oldInstructions=[],this._activeInstructions=[],this._strokeStyleInstructions=this._strokeInstructions=this._fillInstructions=null,this._active=this._dirty=!1,this},d.beginFill=function(a){return this._active&&this._newPath(),this._fillInstructions=a?[new b(this._setProp,["fillStyle",a])]:null,this},d.beginLinearGradientFill=function(a,c,d,e,f,g){this._active&&this._newPath(),d=this._ctx.createLinearGradient(d,e,f,g),e=0;for(f=a.length;e<f;e++)d.addColorStop(c[e],a[e]);return this._fillInstructions=[new b(this._setProp,["fillStyle",d])],this},d.beginRadialGradientFill=function(a,c,d,e,f,g,h,i){this._active&&this._newPath(),d=this._ctx.createRadialGradient(d,e,f,g,h,i),e=0;for(f=a.length;e<f;e++)d.addColorStop(c[e],a[e]);return this._fillInstructions=[new b(this._setProp,["fillStyle",d])],this},d.beginBitmapFill=function(a,c){this._active&&this._newPath();var d=this._ctx.createPattern(a,c||"");return this._fillInstructions=[new b(this._setProp,["fillStyle",d])],this},d.endFill=function(){return this.beginFill(null),this},d.setStrokeStyle=function(a,d,e,f){return this._active&&this._newPath(),this._strokeStyleInstructions=[new b(this._setProp,["lineWidth",a==null?"1":a]),new b(this._setProp,["lineCap",d==null?"butt":isNaN(d)?d:c.STROKE_CAPS_MAP[d]]),new b(this._setProp,["lineJoin",e==null?"miter":isNaN(e)?e:c.STROKE_JOINTS_MAP[e]]),new b(this._setProp,["miterLimit",f==null?"10":f])],this},d.beginStroke=function(a){return this._active&&this._newPath(),this._strokeInstructions=a?[new b(this._setProp,["strokeStyle",a])]:null,this},d.beginLinearGradientStroke=function(a,c,d,e,f,g){this._active&&this._newPath(),d=this._ctx.createLinearGradient(d,e,f,g),e=0;for(f=a.length;e<f;e++)d.addColorStop(c[e],a[e]);return this._strokeInstructions=[new b(this._setProp,["strokeStyle",d])],this},d.beginRadialGradientStroke=function(a,c,d,e,f,g,h,i){this._active&&this._newPath(),d=this._ctx.createRadialGradient(d,e,f,g,h,i),e=0;for(f=a.length;e<f;e++)d.addColorStop(c[e],a[e]);return this._strokeInstructions=[new b(this._setProp,["strokeStyle",d])],this},d.beginBitmapStroke=function(a,c){this._active&&this._newPath();var d=this._ctx.createPattern(a,c||"");return this._strokeInstructions=[new b(this._setProp,["strokeStyle",d])],this},d.endStroke=function(){return this.beginStroke(null),this},d.curveTo=d.quadraticCurveTo,d.drawRect=d.rect,d.drawRoundRect=function(a,b,c,d,e){return this.drawRoundRectComplex(a,b,c,d,e,e,e,e),this},d.drawRoundRectComplex=function(a,c,d,e,f,g,h,i){return this._dirty=this._active=!0,this._activeInstructions.push(new b(this._ctx.moveTo,[a+f,c]),new b(this._ctx.lineTo,[a+d-g,c]),new b(this._ctx.arc,[a+d-g,c+g,g,-Math.PI/2,0,!1]),new b(this._ctx.lineTo,[a+d,c+e-h]),new b(this._ctx.arc,[a+d-h,c+e-h,h,0,Math.PI/2,!1]),new b(this._ctx.lineTo,[a+i,c+e]),new b(this._ctx.arc,[a+i,c+e-i,i,Math.PI/2,Math.PI,!1]),new b(this._ctx.lineTo,[a,c+f]),new b(this._ctx.arc,[a+f,c+f,f,Math.PI,Math.PI*3/2,!1])),this},d.drawCircle=function(a,b,c){return this.arc(a,b,c,0,Math.PI*2),this},d.drawEllipse=function(a,c,d,e){this._dirty=this._active=!0;var f=d/2*.5522848,g=e/2*.5522848,h=a+d,i=c+e,d=a+d/2,e=c+e/2;return this._activeInstructions.push(new b(this._ctx.moveTo,[a,e]),new b(this._ctx.bezierCurveTo,[a,e-g,d-f,c,d,c]),new b(this._ctx.bezierCurveTo,[d+f,c,h,e-g,h,e]),new b(this._ctx.bezierCurveTo,[h,e+g,d+f,i,d,i]),new b(this._ctx.bezierCurveTo,[d-f,i,a,e+g,a,e])),this},d.drawPolyStar=function(a,c,d,e,f,g){this._dirty=this._active=!0,f==null&&(f=0),f=1-f,g==null?g=0:g/=180/Math.PI;var h=Math.PI/e;this._activeInstructions.push(new b(this._ctx.moveTo,[a+Math.cos(g)*d,c+Math.sin(g)*d]));for(var i=0;i<e;i++)g+=h,f!=1&&this._activeInstructions.push(new b(this._ctx.lineTo,[a+Math.cos(g)*d*f,c+Math.sin(g)*d*f])),g+=h,this._activeInstructions.push(new b(this._ctx.lineTo,[a+Math.cos(g)*d,c+Math.sin(g)*d]));return this},d.clone=function(){var a=new c;return a._instructions=this._instructions.slice(),a._activeInstructions=this._activeInstructions.slice(),a._oldInstructions=this._oldInstructions.slice(),this._fillInstructions&&(a._fillInstructions=this._fillInstructions.slice()),this._strokeInstructions&&(a._strokeInstructions=this._strokeInstructions.slice()),this._strokeStyleInstructions&&(a._strokeStyleInstructions=this._strokeStyleInstructions.slice()),a._active=this._active,a._dirty=this._dirty,a},d.toString=function(){return"[Graphics]"},d.mt=d.moveTo,d.lt=d.lineTo,d.at=d.arcTo,d.bt=d.bezierCurveTo,d.qt=d.quadraticCurveTo,d.a=d.arc,d.r=d.rect,d.cp=d.closePath,d.c=d.clear,d.f=d.beginFill,d.lf=d.beginLinearGradientFill,d.rf=d.beginRadialGradientFill,d.bf=d.beginBitmapFill,d.ef=d.endFill,d.ss=d.setStrokeStyle,d.s=d.beginStroke,d.ls=d.beginLinearGradientStroke,d.rs=d.beginRadialGradientStroke,d.bs=d.beginBitmapStroke,d.es=d.endStroke,d.dr=d.drawRect,d.rr=d.drawRoundRect,d.rc=d.drawRoundRectComplex,d.dc=d.drawCircle,d.de=d.drawEllipse,d.dp=d.drawPolyStar,d._updateInstructions=function(){this._instructions=this._oldInstructions.slice(),this._instructions.push(c.beginCmd),this._fillInstructions&&this._instructions.push.apply(this._instructions,this._fillInstructions),this._strokeInstructions&&(this._instructions.push.apply(this._instructions,this._strokeInstructions),this._strokeStyleInstructions&&this._instructions.push.apply(this._instructions,this._strokeStyleInstructions)),this._instructions.push.apply(this._instructions,this._activeInstructions),this._fillInstructions&&this._instructions.push(c.fillCmd),this._strokeInstructions&&this._instructions.push(c.strokeCmd)},d._newPath=function(){this._dirty&&this._updateInstructions(),this._oldInstructions=this._instructions,this._activeInstructions=[],this._active=this._dirty=!1},d._setProp=function(a,b){this[a]=b},a.Graphics=c}(window),function(a){var b=function(){this.initialize()},c=b.prototype;b.suppressCrossDomainErrors=!1,b._hitTestCanvas=document.createElement("canvas"),b._hitTestCanvas.width=b._hitTestCanvas.height=1,b._hitTestContext=b._hitTestCanvas.getContext("2d"),c.alpha=1,c.cacheCanvas=null,c.id=-1,c.mouseEnabled=!0,c.name=null,c.parent=null,c.regX=0,c.regY=0,c.rotation=0,c.scaleX=1,c.scaleY=1,c.skewX=0,c.skewY=0,c.shadow=null,c.visible=!0,c.x=0,c.y=0,c.compositeOperation=null,c.snapToPixel=!1,c.onPress=null,c.onClick=null,c.onDoubleClick=null,c.onMouseOver=null,c.onMouseOut=null,c.tick=null,c.filters=null,c.cacheID=0,c._cacheOffsetX=0,c._cacheOffsetY=0,c._cacheDataURLID=0,c._cacheDataURL=null,c._matrix=null,c.initialize=function(){this.id=UID.get(),this._matrix=new Matrix2D},c.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0},c.draw=function(a,b){return b||!this.cacheCanvas?!1:(a.drawImage(this.cacheCanvas,this._cacheOffsetX,this._cacheOffsetY),!0)},c.cache=function(a,b,c,d){this.cacheCanvas==null&&(this.cacheCanvas=document.createElement("canvas"));var e=this.cacheCanvas.getContext("2d");this.cacheCanvas.width=c,this.cacheCanvas.height=d,e.clearRect(0,0,c+1,d+1),e.setTransform(1,0,0,1,-a,-b),this.draw(e,!0,this._matrix.reinitialize(1,0,0,1,-a,-b)),this._cacheOffsetX=a,this._cacheOffsetY=b,this._applyFilters(),this.cacheID++},c.updateCache=function(a){if(this.cacheCanvas==null)throw"cache() must be called before updateCache()";var b=this.cacheCanvas.getContext("2d");b.setTransform(1,0,0,1,-this._cacheOffsetX,-this._cacheOffsetY),a?b.globalCompositeOperation=a:b.clearRect(0,0,this.cacheCanvas.width+1,this.cacheCanvas.height+1),this.draw(b,!0),a&&(b.globalCompositeOperation="source-over"),this._applyFilters(),this.cacheID++},c.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this._cacheOffsetX=this._cacheOffsetY=0},c.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},c.getStage=function(){for(var a=this;a.parent;)a=a.parent;return a instanceof Stage?a:null},c.localToGlobal=function(a,b){var c=this.getConcatenatedMatrix(this._matrix);return c==null?null:(c.append(1,0,0,1,a,b),new Point(c.tx,c.ty))},c.globalToLocal=function(a,b){var c=this.getConcatenatedMatrix(this._matrix);return c==null?null:(c.invert(),c.append(1,0,0,1,a,b),new Point(c.tx,c.ty))},c.localToLocal=function(a,b,c){return a=this.localToGlobal(a,b),c.globalToLocal(a.x,a.y)},c.setTransform=function(a,b,c,d,e,f,g,h,i){this.x=a||0,this.y=b||0,this.scaleX=c==null?1:c,this.scaleY=d==null?1:d,this.rotation=e||0,this.skewX=f||0,this.skewY=g||0,this.regX=h||0,this.regY=i||0},c.getConcatenatedMatrix=function(a){a?a.identity():a=new Matrix2D;for(var b=this;b!=null;)a.prependTransform(b.x,b.y,b.scaleX,b.scaleY,b.rotation,b.skewX,b.skewY,b.regX,b.regY),a.prependProperties(b.alpha,b.shadow,b.compositeOperation),b=b.parent;return a},c.hitTest=function(a,c){var d=b._hitTestContext,e=b._hitTestCanvas;return d.setTransform(1,0,0,1,-a,-c),this.draw(d),d=this._testHit(d),e.width=0,e.width=1,d},c.clone=function(){var a=new b;return this.cloneProps(a),a},c.toString=function(){return"[DisplayObject (name="+this.name+")]"},c.cloneProps=function(a){a.alpha=this.alpha,a.name=this.name,a.regX=this.regX,a.regY=this.regY,a.rotation=this.rotation,a.scaleX=this.scaleX,a.scaleY=this.scaleY,a.shadow=this.shadow,a.skewX=this.skewX,a.skewY=this.skewY,a.visible=this.visible,a.x=this.x,a.y=this.y,a.mouseEnabled=this.mouseEnabled,a.compositeOperation=this.compositeOperation,this.cacheCanvas&&(a.cacheCanvas=this.cacheCanvas.cloneNode(!0),a.cacheCanvas.getContext("2d").putImageData(this.cacheCanvas.getContext("2d").getImageData(0,0,this.cacheCanvas.width,this.cacheCanvas.height),0,0))},c.applyShadow=function(a,b){b=b||Shadow.identity,a.shadowColor=b.color,a.shadowOffsetX=b.offsetX,a.shadowOffsetY=b.offsetY,a.shadowBlur=b.blur},c._tick=function(){this.tick&&this.tick()},c._testHit=function(a){try{var c=a.getImageData(0,0,1,1).data[3]>1}catch(d){if(!b.suppressCrossDomainErrors)throw"An error has occured. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return c},c._applyFilters=function(){if(this.filters&&this.filters.length!=0&&this.cacheCanvas)for(var a=this.filters.length,b=this.cacheCanvas.getContext("2d"),c=this.cacheCanvas.width,d=this.cacheCanvas.height,e=0;e<a;e++)this.filters[e].applyFilter(b,0,0,c,d)},a.DisplayObject=b}(window),function(a){var b=function(){this.initialize()},c=b.prototype=new DisplayObject;c.children=null,c.DisplayObject_initialize=c.initialize,c.initialize=function(){this.DisplayObject_initialize(),this.children=[]},c.isVisible=function(){return this.visible&&this.alpha>0&&this.children.length&&this.scaleX!=0&&this.scaleY!=0},c.DisplayObject_draw=c.draw,c.draw=function(a,c,d){var e=Stage._snapToPixelEnabled;if(this.DisplayObject_draw(a,c))return!0;for(var d=d||this._matrix.reinitialize(1,0,0,1,0,0,this.alpha,this.shadow,this.compositeOperation),c=this.children.length,f=this.children.slice(0),g=0;g<c;g++){var h=f[g];if(h.isVisible()){var i=!1,j=h._matrix.reinitialize(d.a,d.b,d.c,d.d,d.tx,d.ty,d.alpha,d.shadow,d.compositeOperation);j.appendTransform(h.x,h.y,h.scaleX,h.scaleY,h.rotation,h.skewX,h.skewY,h.regX,h.regY),j.appendProperties(h.alpha,h.shadow,h.compositeOperation),h instanceof b&&h.cacheCanvas==null||(e&&h.snapToPixel&&j.a==1&&j.b==0&&j.c==0&&j.d==1?a.setTransform(j.a,j.b,j.c,j.d,j.tx+.5|0,j.ty+.5|0):a.setTransform(j.a,j.b,j.c,j.d,j.tx,j.ty),a.globalAlpha=j.alpha,a.globalCompositeOperation=j.compositeOperation||"source-over",(i=j.shadow)&&this.applyShadow(a,i)),h.draw(a,!1,j),i&&this.applyShadow(a)}}return!0},c.addChild=function(a){var b=arguments.length;if(b>1){for(var c=0;c<b;c++)this.addChild(arguments[c]);return arguments[b-1]}return a.parent&&a.parent.removeChild(a),a.parent=this,this.children.push(a),a},c.addChildAt=function(a,b){var c=arguments.length;if(c>2){for(var b=arguments[d-1],d=0;d<c-1;d++)this.addChildAt(arguments[d],b+d);return arguments[c-2]}return a.parent&&a.parent.removeChild(a),a.parent=this,this.children.splice(b,0,a),a},c.removeChild=function(a){var b=arguments.length;if(b>1){for(var c=!0,d=0;d<b;d++)c=c&&this.removeChild(arguments[d]);return c}return this.removeChildAt(this.children.indexOf(a))},c.removeChildAt=function(a){var b=arguments.length;if(b>1){for(var c=[],d=0;d<b;d++)c[d]=arguments[d];c.sort(function(a,b){return b-a});for(var e=!0,d=0;d<b;d++)e=e&&this.removeChildAt(c[d]);return e}return a<0||a>this.children.length-1?!1:(b=this.children[a],b!=null&&(b.parent=null),this.children.splice(a,1),!0)},c.removeAllChildren=function(){for(var a=this.children;a.length;)a.pop().parent=null},c.getChildAt=function(a){return this.children[a]},c.sortChildren=function(a){this.children.sort(a)},c.getChildIndex=function(a){return this.children.indexOf(a)},c.getNumChildren=function(){return this.children.length},c.swapChildrenAt=function(a,b){var c=this.children,d=c[a],e=c[b];d&&e&&(c[a]=e,c[b]=d)},c.swapChildren=function(a,b){for(var c=this.children,d,e,f=0,g=c.length;f<g;f++)if(c[f]==a&&(d=f),c[f]==b&&(e=f),d!=null&&e!=null)return;f!=g&&(c[d]=b,c[e]=a)},c.setChildIndex=function(a,b){for(var c=this.children,d=0,e=c.length;d<e;d++)if(c[d]==a)break;d==e||b<0||b>e||d==b||(c.splice(b,1),b<d&&d--,c.splice(a,d,0))},c.contains=function(a){for(;a;){if(a==this)return!0;a=a.parent}return!1},c.hitTest=function(a,b){return this.getObjectUnderPoint(a,b)!=null},c.getObjectsUnderPoint=function(a,b){var c=[],d=this.localToGlobal(a,b);return this._getObjectsUnderPoint(d.x,d.y,c),c},c.getObjectUnderPoint=function(a,b){var c=this.localToGlobal(a,b);return this._getObjectsUnderPoint(c.x,c.y)},c.clone=function(a){var c=new b;this.cloneProps(c);if(a)for(var d=c.children=[],e=0,f=this.children.length;e<f;e++){var g=this.children[e].clone(a);g.parent=c,d.push(g)}return c},c.toString=function(){return"[Container (name="+this.name+")]"},c._tick=function(a){for(var b=this.children.length-1;b>=0;b--){var c=this.children[b];c._tick&&c._tick(a)}this.tick&&this.tick()},c._getObjectsUnderPoint=function(a,c,d,e){var f=DisplayObject._hitTestContext,g=DisplayObject._hitTestCanvas,h=this._matrix,i=e&1&&(this.onPress||this.onClick||this.onDoubleClick)||e&2&&(this.onMouseOver||this.onMouseOut);if(this.cacheCanvas){if(this.getConcatenatedMatrix(h),f.setTransform(h.a,h.b,h.c,h.d,h.tx-a,h.ty-c),f.globalAlpha=h.alpha,this.draw(f),!this._testHit(f))return null;if(g.width=0,g.width=1,i)return this}for(var j=this.children.length-1;j>=0;j--){var k=this.children[j];if(k.isVisible()&&k.mouseEnabled)if(k instanceof b){if(i){if(k=k._getObjectsUnderPoint(a,c))return this}else if(k=k._getObjectsUnderPoint(a,c,d,e),!d&&k)return k}else if(!e||i||e&1&&(k.onPress||k.onClick||k.onDoubleClick)||e&2&&(k.onMouseOver||k.onMouseOut))if(k.getConcatenatedMatrix(h),f.setTransform(h.a,h.b,h.c,h.d,h.tx-a,h.ty-c),f.globalAlpha=h.alpha,k.draw(f),this._testHit(f)){if(g.width=0,g.width=1,i)return this;if(d)d.push(k);else return k}}return null},a.Container=b}(window),function(a){var b=function(a){this.initialize(a)},c=b.prototype=new Container;b._snapToPixelEnabled=!1,c.autoClear=!0,c.canvas=null,c.mouseX=null,c.mouseY=null,c.onMouseMove=null,c.onMouseUp=null,c.onMouseDown=null,c.snapToPixelEnabled=!1,c.mouseInBounds=!1,c.tickOnUpdate=!0,c._activeMouseEvent=null,c._activeMouseTarget=null,c._mouseOverIntervalID=null,c._mouseOverX=0,c._mouseOverY=0,c._mouseOverTarget=null,c.Container_initialize=c.initialize,c.initialize=function(a){this.Container_initialize(),this.canvas=a instanceof HTMLCanvasElement?a:document.getElementById(a),this._enableMouseEvents(!0)},c.update=function(){if(this.canvas){this.autoClear&&this.clear(),b._snapToPixelEnabled=this.snapToPixelEnabled;if(this.tickOnUpdate){if(this.tick==this.update){var a=1;this.tick=null}this._tick(!0),a&&(this.tick=this.update)}this.draw(this.canvas.getContext("2d"),!1,this.getConcatenatedMatrix(this._matrix))}},c.tick=c.update,c.clear=function(){if(this.canvas){var a=this.canvas.getContext("2d");a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,this.canvas.width,this.canvas.height)}},c.toDataURL=function(a,b){b||(b="image/png");var c=this.canvas.getContext("2d"),d=this.canvas.width,e=this.canvas.height,f;if(a){f=c.getImageData(0,0,d,e);var g=c.globalCompositeOperation;c.globalCompositeOperation="destination-over",c.fillStyle=a,c.fillRect(0,0,d,e)}var h=this.canvas.toDataURL(b);return a&&(c.clearRect(0,0,d,e),c.putImageData(f,0,0),c.globalCompositeOperation=g),h},c.enableMouseOver=function(a){this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null);if(!(a<=0)){var b=this;this._mouseOverIntervalID=setInterval(function(){b._testMouseOver()},1e3/Math.min(50,a)),this._mouseOverX=NaN,this._mouseOverTarget=null}},c.clone=function(){var a=new b(null);return this.cloneProps(a),a},c.toString=function(){return"[Stage (name="+this.name+")]"},c._enableMouseEvents=function(){var b=this,c=a.addEventListener?a:document;c.addEventListener("mouseup",function(a){b._handleMouseUp(a)},!1),c.addEventListener("mousemove",function(a){b._handleMouseMove(a)},!1),c.addEventListener("dblclick",function(a){b._handleDoubleClick(a)},!1),this.canvas&&this.canvas.addEventListener("mousedown",function(a){b._handleMouseDown(a)},!1)},c._handleMouseMove=function(b){if(this.canvas){b||(b=a.event);var c=this.mouseInBounds;this._updateMousePosition(b.pageX,b.pageY);if(c||this.mouseInBounds)b=new MouseEvent("onMouseMove",this.mouseX,this.mouseY,this,b),this.onMouseMove&&this.onMouseMove(b),this._activeMouseEvent&&this._activeMouseEvent.onMouseMove&&this._activeMouseEvent.onMouseMove(b)}else this.mouseX=this.mouseY=null},c._updateMousePosition=function(a,b){var c=this.canvas;do a-=c.offsetLeft,b-=c.offsetTop;while(c=c.offsetParent);if(this.mouseInBounds=a>=0&&b>=0&&a<this.canvas.width&&b<this.canvas.height)this.mouseX=a,this.mouseY=b},c._handleMouseUp=function(a){var b=new MouseEvent("onMouseUp",this.mouseX,this.mouseY,this,a);this.onMouseUp&&this.onMouseUp(b),this._activeMouseEvent&&this._activeMouseEvent.onMouseUp&&this._activeMouseEvent.onMouseUp(b),this._activeMouseTarget&&this._activeMouseTarget.onClick&&this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,true,this._mouseOverIntervalID?3:1)==this._activeMouseTarget&&this._activeMouseTarget.onClick(new MouseEvent("onClick",this.mouseX,this.mouseY,this._activeMouseTarget,a)),this._activeMouseEvent=this._activeMouseTarget=null},c._handleMouseDown=function(a){this.onMouseDown&&this.onMouseDown(new MouseEvent("onMouseDown",this.mouseX,this.mouseY,this,a));var b=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,this._mouseOverIntervalID?3:1);b&&(b.onPress instanceof Function&&(a=new MouseEvent("onPress",this.mouseX,this.mouseY,b,a),b.onPress(a),a.onMouseMove||a.onMouseUp)&&(this._activeMouseEvent=a),this._activeMouseTarget=b)},c._testMouseOver=function(){if(this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds
){var a=null;this.mouseInBounds&&(a=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,3),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY),this._mouseOverTarget!=a&&(this._mouseOverTarget&&this._mouseOverTarget.onMouseOut&&this._mouseOverTarget.onMouseOut(new MouseEvent("onMouseOut",this.mouseX,this.mouseY,this._mouseOverTarget)),a&&a.onMouseOver&&a.onMouseOver(new MouseEvent("onMouseOver",this.mouseX,this.mouseY,a)),this._mouseOverTarget=a)}},c._handleDoubleClick=function(a){this.onDoubleClick&&this.onDoubleClick(new MouseEvent("onDoubleClick",this.mouseX,this.mouseY,this,a));var b=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,this._mouseOverIntervalID?3:1);b&&b.onDoubleClick instanceof Function&&b.onDoubleClick(new MouseEvent("onPress",this.mouseX,this.mouseY,b,a))},a.Stage=b}(window),function(a){var b=function(a){this.initialize(a)},c=b.prototype=new DisplayObject;c.image=null,c.snapToPixel=!0,c.DisplayObject_initialize=c.initialize,c.initialize=function(a){this.DisplayObject_initialize(),typeof a=="string"?(this.image=new Image,this.image.src=a):this.image=a},c.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.image&&(this.image.complete||this.image.getContext||this.image.readyState==2)},c.DisplayObject_draw=c.draw,c.draw=function(a,b){return this.DisplayObject_draw(a,b)?!0:(a.drawImage(this.image,0,0),!0)},c.clone=function(){var a=new b(this.image);return this.cloneProps(a),a},c.toString=function(){return"[Bitmap (name="+this.name+")]"},a.Bitmap=b}(window),function(a){var b=function(a){this.initialize(a)},c=b.prototype=new DisplayObject;c.onAnimationEnd=null,c.currentFrame=-1,c.currentAnimation=null,c.paused=!0,c.spriteSheet=null,c.snapToPixel=!0,c.offset=0,c.currentAnimationFrame=0,c._advanceCount=0,c._animation=null,c.DisplayObject_initialize=c.initialize,c.initialize=function(a){this.DisplayObject_initialize(),this.spriteSheet=a},c.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.spriteSheet.complete&&this.currentFrame>=0},c.DisplayObject_draw=c.draw,c.draw=function(a,b){if(this.DisplayObject_draw(a,b))return!0;this._normalizeFrame();var c=this.spriteSheet.getFrame(this.currentFrame);if(c!=null){var d=c.rect;return a.drawImage(c.image,d.x,d.y,d.width,d.height,-c.regX,-c.regY,d.width,d.height),!0}},c.gotoAndPlay=function(a){this.paused=!1,this._goto(a)},c.gotoAndStop=function(a){this.paused=!0,this._goto(a)},c.advance=function(){this._animation?this.currentAnimationFrame++:this.currentFrame++,this._normalizeFrame()},c.clone=function(){var a=new b(this.spriteSheet);return this.cloneProps(a),a},c.toString=function(){return"[BitmapAnimation (name="+this.name+")]"},c._tick=function(a){var b=this._animation?this._animation.frequency:1;a&&!this.paused&&(++this._advanceCount+this.offset)%b==0&&this.advance()},c._normalizeFrame=function(){var a=this._animation;a?this.currentAnimationFrame>=a.frames.length?(a.next?this._goto(a.next):(this.paused=!0,this.currentAnimationFrame=a.frames.length-1,this.currentFrame=a.frames[this.currentAnimationFrame]),this.onAnimationEnd)&&this.onAnimationEnd(this,a.name):this.currentFrame=a.frames[this.currentAnimationFrame]:this.currentFrame>=this.spriteSheet.getNumFrames()&&(this.currentFrame=0,this.onAnimationEnd)&&this.onAnimationEnd(this,null)},c.DisplayObject_cloneProps=c.cloneProps,c.cloneProps=function(a){this.DisplayObject_cloneProps(a),a.onAnimationEnd=this.onAnimationEnd,a.currentFrame=this.currentFrame,a.currentAnimation=this.currentAnimation,a.paused=this.paused,a.offset=this.offset,a._animation=this._animation,a.currentAnimationFrame=this.currentAnimationFrame},c._goto=function(a){if(isNaN(a)){var b=this.spriteSheet.getAnimation(a);b&&(this.currentAnimationFrame=0,this._animation=b,this.currentAnimation=a,this._normalizeFrame())}else this.currentAnimation=this._animation=null,this.currentFrame=a},a.BitmapAnimation=b}(window),function(a){var b=function(a){this.initialize(a)},c=b.prototype=new DisplayObject;c.graphics=null,c.DisplayObject_initialize=c.initialize,c.initialize=function(a){this.DisplayObject_initialize(),this.graphics=a?a:new Graphics},c.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.graphics},c.DisplayObject_draw=c.draw,c.draw=function(a,b){return this.DisplayObject_draw(a,b)?!0:(this.graphics.draw(a),!0)},c.clone=function(a){return a=new b(a&&this.graphics?this.graphics.clone():this.graphics),this.cloneProps(a),a},c.toString=function(){return"[Shape (name="+this.name+")]"},a.Shape=b}(window),function(a){var b=function(a,b,c){this.initialize(a,b,c)},c=b.prototype=new DisplayObject;b._workingContext=document.createElement("canvas").getContext("2d"),c.text="",c.font=null,c.color=null,c.textAlign=null,c.textBaseline=null,c.maxWidth=null,c.outline=!1,c.lineHeight=null,c.lineWidth=null,c.DisplayObject_initialize=c.initialize,c.initialize=function(a,b,c){this.DisplayObject_initialize(),this.text=a,this.font=b,this.color=c?c:"#000"},c.isVisible=function(){return Boolean(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.text!=null&&this.text!="")},c.DisplayObject_draw=c.draw,c.draw=function(a,b){if(this.DisplayObject_draw(a,b))return!0;this.outline?a.strokeStyle=this.color:a.fillStyle=this.color,a.font=this.font,a.textAlign=this.textAlign?this.textAlign:"start",a.textBaseline=this.textBaseline?this.textBaseline:"alphabetic";for(var c=String(this.text).split(/(?:\r\n|\r|\n)/),d=this.lineHeight==null?this.getMeasuredLineHeight():this.lineHeight,e=0,f=0,g=c.length;f<g;f++){var h=a.measureText(c[f]).width;if(this.lineWidth==null||h<this.lineWidth)this._drawTextLine(a,c[f],e);else{for(var h=c[f].split(/(\s)/),i=h[0],j=1,k=h.length;j<k;j+=2)a.measureText(i+h[j]+h[j+1]).width>this.lineWidth?(this._drawTextLine(a,i,e),e+=d,i=h[j+1]):i+=h[j]+h[j+1];this._drawTextLine(a,i,e)}e+=d}return!0},c.getMeasuredWidth=function(){return this._getWorkingContext().measureText(this.text).width},c.getMeasuredLineHeight=function(){return this._getWorkingContext().measureText("M").width*1.2},c.clone=function(){var a=new b(this.text,this.font,this.color);return this.cloneProps(a),a},c.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},c.DisplayObject_cloneProps=c.cloneProps,c.cloneProps=function(a){this.DisplayObject_cloneProps(a),a.textAlign=this.textAlign,a.textBaseline=this.textBaseline,a.maxWidth=this.maxWidth,a.outline=this.outline,a.lineHeight=this.lineHeight,a.lineWidth=this.lineWidth},c._getWorkingContext=function(){var a=b._workingContext;return a.font=this.font,a.textAlign=this.textAlign?this.textAlign:"start",a.textBaseline=this.textBaseline?this.textBaseline:"alphabetic",a},c._drawTextLine=function(a,b,c){this.outline?a.strokeText(b,0,c,this.maxWidth):a.fillText(b,0,c,this.maxWidth)},a.Text=b}(window),function(a){var b=function(){throw"SpriteSheetUtils cannot be instantiated"};b._workingCanvas=document.createElement("canvas"),b._workingContext=b._workingCanvas.getContext("2d"),b.addFlippedFrames=function(a,d,e,f){if(d||e||f){var g=0;d&&b._flip(a,++g,!0,!1),e&&b._flip(a,++g,!1,!0),f&&b._flip(a,++g,!0,!0)}},b.extractFrame=function(a,d){isNaN(d)&&(d=a.getAnimation(d).frames[0]);var e=a.getFrame(d);if(!e)return null;var f=e.rect,g=b._workingCanvas;return g.width=f.width,g.height=f.height,b._workingContext.drawImage(e.image,f.x,f.y,f.width,f.height,0,0,f.width,f.height),e=new Image,e.src=g.toDataURL("image/png"),e},b._flip=function(a,d,e,f){for(var g=a._images,h=b._workingCanvas,i=b._workingContext,j=g.length/d,k=0;k<j;k++){var l=g[k];l.__tmp=k,h.width=l.width,h.height=l.height,i.setTransform(e?-1:1,0,0,f?-1:1,e?l.width:0,f?l.height:0),i.drawImage(l,0,0);var m=new Image;m.src=h.toDataURL("image/png"),m.width=l.width,m.height=l.height,g.push(m)}i=a._frames,h=i.length/d;for(k=0;k<h;k++){var l=i[k],n=l.rect.clone(),m=g[l.image.__tmp+j*d],o={image:m,rect:n,regX:l.regX,regY:l.regY};e&&(n.x=m.width-n.x-n.width,o.regX=n.width-l.regX),f&&(n.y=m.height-n.y-n.height,o.regY=n.height-l.regY),i.push(o)}e="_"+(e?"h":"")+(f?"v":""),f=a._animations,a=a._data,g=f.length/d;for(k=0;k<g;k++){i=f[k],l=a[i],j={name:i+e,frequency:l.frequency,next:l.next,frames:[]},l.next&&(j.next+=e),i=l.frames,l=0;for(m=i.length;l<m;l++)j.frames.push(i[l]+h*d);a[j.name]=j,f.push(j.name)}},a.SpriteSheetUtils=b}(window),function(a){var b=function(a){this.initialize(a)},c=b.prototype=new DisplayObject;c.htmlElement=null,c._style=null,c.DisplayObject_initialize=c.initialize,c.initialize=function(a){typeof a=="string"&&(a=document.getElementById(a)),this.DisplayObject_initialize(),this.mouseEnabled=!1;if(this.htmlElement=a)this._style=a.style,this._style.position="absolute",this._style.transformOrigin=this._style.webkitTransformOrigin=this._style.msTransformOrigin=this._style.MozTransformOrigin="0% 0%"},c.isVisible=function(){return this.htmlElement!=null},c.draw=function(){if(this.htmlElement!=null){var a=this._matrix,b=this.htmlElement;return b.style.opacity=""+a.alpha,b.style.visibility=this.visible?"visible":"hidden",b.style.transform=b.style.webkitTransform=b.style.oTransform=b.style.msTransform=["matrix("+a.a,a.b,a.c,a.d,a.tx,a.ty+")"].join(","),b.style.MozTransform=["matrix("+a.a,a.b,a.c,a.d,a.tx+"px",a.ty+"px)"].join(","),!0}},c.cache=function(){},c.uncache=function(){},c.updateCache=function(){},c.hitTest=function(){},c.localToGlobal=function(){},c.globalToLocal=function(){},c.localToLocal=function(){},c.clone=function(){var a=new b;return this.cloneProps(a),a},c.toString=function(){return"[DOMElement (name="+this.name+")]"},c._tick=function(){this.htmlElement!=null&&(this.htmlElement.style.visibility="hidden")},a.DOMElement=b}(window),function(a){var b=function(){this.initialize()},c=b.prototype;c.initialize=function(){},c.getBounds=function(){return new Rectangle(0,0,0,0)},c.applyFilter=function(){},c.toString=function(){return"[Filter]"},c.clone=function(){return new b},a.Filter=b}(window),function(a){var b=function(){throw"Touch cannot be instantiated"};b.isSupported=function(){return"ontouchstart"in a},b.enable=function(a){a!=null&&b.isSupported()&&(a._primaryTouchId=-1,a._handleTouchMoveListener=null,a.canvas.addEventListener("touchstart",function(d){b._handleTouchStart(a,d)},!1),document.addEventListener("touchend",function(d){b._handleTouchEnd(a,d)},!1))},b._handleTouchStart=function(a,d){d.preventDefault();if(a._primaryTouchId==-1){a._handleTouchMoveListener=a._handleTouchMoveListener||function(d){b._handleTouchMove(a,d)},document.addEventListener("touchmove",a._handleTouchMoveListener,!1);var e=d.changedTouches[0];a._primaryTouchId=e.identifier,a._updateMousePosition(e.pageX,e.pageY),a._handleMouseDown(e)}},b._handleTouchMove=function(a,d){var e=b._findPrimaryTouch(a,d.changedTouches);e&&a._handleMouseMove(e)},b._handleTouchEnd=function(a,d){var e=b._findPrimaryTouch(a,d.changedTouches);e&&(a._primaryTouchId=-1,a._handleMouseUp(e),document.removeEventListener("touchmove",a._handleTouchMoveListener),a._handleTouchMoveListener=null)},b._findPrimaryTouch=function(a,b){for(var c=b.length,d=0;d<c;d++){var e=b[d];if(e.identifier==a._primaryTouchId)return e}return null},a.Touch=b}(window)